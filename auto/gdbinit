set architecture i386:intel
set print pretty

add-symbol-file bin/symbols/BM.elf 0x1000
#add-symbol-file bin/kernel/kernel.elf 0x100000
add-symbol-file bin/kernel/kernel.elf
# add-symbol-file usr/fs_layout/sys/terminal.elf
add-symbol-file usr/fs_layout/home/games/quickshot.elf

#layout prev
layout src
# layout asm
# layout reg

target remote localhost:1234

# MBR start
#break *0x7c00

# Bootmain start
#break bootmain

# Kernel physical entry
#break _start

# Kernel main start
# break kernel_main
# break _entry

# User program start
break main
# break itruncate
# break fs.c:501
#break freestanding_execute
# break cmd_builtin_cd
# break ui.c:276
# break fs_build_path


define plist
  set $node = $arg0
  while $node != 0
    printf "Node at %p:\n", $node
    p *$node
    set $node = $node->next
  end
end

continue