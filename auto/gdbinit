set architecture i386:intel
set disassembly-flavor intel
set print pretty

add-symbol-file bin/kernel/kernel.elf 0x1000

layout asm
layout reg

target remote localhost:1234

# MBR start
#break *0x7c00
# Kernel entry start
break *0x1000
continue

define hook-stop

# Translate the segment:offset into a physical address
printf "[%4x:%4x] ", $cs, $eip
x/i $cs*16+$eip

end
